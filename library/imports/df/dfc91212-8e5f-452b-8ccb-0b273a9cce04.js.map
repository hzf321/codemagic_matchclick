{"version":3,"sources":["assets/scripts/adMgr.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\nlet onCloseFinishCb: () => void = null;\nlet onClosefailCb: () => void = null;\nclass adMgrClass {\n\n    private static _instance: adMgrClass = null;\n\n    public static getInstance(): adMgrClass {\n        if (this._instance == null) {\n            this._instance = new adMgrClass();\n        }\n        return this._instance;\n    }\n\n\n    adapterBg(bgNode: cc.Node) {\n        let _bgWidthScale = cc.winSize.width / bgNode.width;\n        let _bgHeightScale = cc.winSize.height / bgNode.height;\n        bgNode.scale = Math.max(_bgWidthScale, _bgHeightScale);\n    }\n\n\n    showToast(str: string) {\n        cc.resources.load(\"toast\", cc.Prefab, (err, prefab) => {\n            if (err) {\n                return;\n            }\n            let toast :any= cc.instantiate(prefab);\n            let parentNode = cc.Canvas.instance.node;\n            if (toast && parentNode) {\n                toast.active = true;\n                parentNode.addChild(toast);\n                let toastLabel = toast.getChildByName(\"label\");\n                toastLabel.getComponent(cc.Label).string = str;\n                cc.Tween.stopAllByTarget(toast);\n                toast.opacity = 255;\n                cc.tween(toast).to(0.15, { scale: 1.2 }).to(0.15, { scale: 1 }).delay(0.5).to(0.5, { opacity: 0 }).call(() => {\n                    toast.destroy();\n                }).start();\n            }\n        })\n    }\n\n\n    setVideoFailCb(cb: () => void) {\n        window['onClosefailCb'] = null;\n        window['onClosefailCb'] = cb;\n    }\n\n    //看广告\n    showVideo(finishCb: () => void) {\n        console.log(\"android------------看广告\")\n        if (cc.sys.isNative && cc.sys.OS_ANDROID == cc.sys.os) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"showShiPing\", \"()V\");\n            onCloseFinishCb = null;\n            onCloseFinishCb = finishCb;\n        } else if (cc.sys.isNative && cc.sys.OS_IOS == cc.sys.os) {\n            //@ts-ignore\n            jsb.reflection.callStaticMethod(\"UnityMgr\", \"loadReward\");\n            window['onCloseFinishCb'] = null;\n            window['onCloseFinishCb'] = finishCb;\n        } else {\n            finishCb();\n        }\n\n    }\n\n    //打开banner\n    showBanner() {\n        if (cc.sys.isNative && cc.sys.OS_ANDROID == cc.sys.os) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"showbanner\", \"()V\");\n        } else if (cc.sys.isNative && cc.sys.OS_IOS == cc.sys.os) {\n\n        }\n    }\n\n    //关闭banner\n    closeBanner() {\n        if (cc.sys.isNative && cc.sys.OS_ANDROID == cc.sys.os) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"hidebanner\", \"()V\");\n        } else if (cc.sys.isNative && cc.sys.OS_IOS == cc.sys.os) {\n\n        }\n    }\n\n    //打开插屏\n    showInterst() {\n        if (cc.sys.isNative && cc.sys.OS_ANDROID == cc.sys.os) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"showChaping\", \"()V\");\n        } else if (cc.sys.isNative && cc.sys.OS_IOS == cc.sys.os) {\n\n        }\n    }\n\n}\n\nexport let admgr = adMgrClass.getInstance();\n\n\nwindow['onCloseFinishCb'] = () => {\n\n}\n\n/**sdk调用js里面window公众的函数 */\nwindow['onCloseVdieoFinishCb'] = () => {\n    // if (isPlayMusic) {\n    //     AudioCtr.bg();\n    // }\n    console.log(\"onCloseVdieoFinishCb-------------------------\")\n    window['onCloseFinishCb']()\n}\n\n\n/**sdk调用js里面window公众的函数 */\nwindow['onCloseVdieofailCb'] = () => {\n    // if (isPlayMusic) {\n    //     AudioCtr.bg();\n    // }\n    console.log(\"onCloseVdieofailCbonCloseVdieofailCbonCloseVdieofailCb\")\n    window['onClosefailCb']()\n}\n\nwindow['onClosefailCb'] = () => {\n\n}"]}