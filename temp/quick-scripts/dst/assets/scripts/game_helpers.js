
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/game_helpers.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '31abcTCiwtHU41uk44bj5ba', 'game_helpers');
// scripts/game_helpers.ts

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var game_helpers = /** @class */ (function () {
    function game_helpers() {
    }
    game_helpers.randomItem = function (array) {
        if (array && array.length > 0) {
            return array[this.getRandomInt(0, array.length - 1)];
        }
        else {
            return null;
        }
    };
    game_helpers.Object2Array = function (obj) {
        var arr = [];
        for (var key in obj) {
            arr.push(obj[key]);
        }
        return arr;
    };
    game_helpers.getRandom = function (lower, upper) {
        return Math.random() * (upper - lower) + lower;
    };
    ;
    game_helpers.getRandomInt = function (lower, upper) {
        return Math.floor(Math.random() * (upper - lower)) + lower;
    };
    ;
    game_helpers.seedRandom = function () {
        return game_helpers.getRandom(0, 1);
        // this.seed = (this.seed * 9301 + 49297) % 233280;
        // return this.seed / 233280.0;
    };
    game_helpers.seedRandomInt = function (lower, upper) {
        return game_helpers.getRandomInt(lower, upper);
        // return Math.floor(game_helpers.seedRandom() * (upper - lower)) + lower;
    };
    game_helpers.rnd = function (seed) {
        seed = (seed * 9301 + 49297) % 233280; //为何使用这三个数?
        return seed / (233280.0);
    };
    ;
    game_helpers.getPowNum = function (p) {
        return Math.pow(10, p);
    };
    ;
    game_helpers.setServerTime = function (time) {
        game_helpers.timeOffset = time - new Date().getTime();
        cc.log("timeOffset:", game_helpers.timeOffset);
    };
    game_helpers.getServerTime = function () {
        return new Date().getTime() + game_helpers.timeOffset;
    };
    game_helpers.formatDate = function (t) {
        var date = new Date(t);
        var YY = date.getFullYear() + '-';
        var MM = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-';
        var DD = (date.getDate() < 10 ? '0' + (date.getDate()) : date.getDate());
        var hh = (date.getHours() < 10 ? '0' + date.getHours() : date.getHours()) + ':';
        var mm = (date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes()) + ':';
        var ss = (date.getSeconds() < 10 ? '0' + date.getSeconds() : date.getSeconds());
        return YY + MM + DD + " " + hh + mm + ss;
    };
    game_helpers.cloneObj = function (obj) {
        obj = JSON.stringify(obj);
        obj = JSON.parse(obj);
        return obj;
    };
    game_helpers.getTimeStrByS = function (second) {
        second = Math.floor(second);
        if (second < 0)
            second = 0;
        var d = Math.floor(second / 3600 / 24);
        second -= d * 3600 * 24;
        var h = Math.floor(second / 3600);
        second -= h * 3600;
        var m = Math.floor(second / 60);
        second -= m * 60;
        var front = "00";
        if (h > 9) {
            front = "" + h;
        }
        else {
            front = "0" + h;
        }
        var mid = "00";
        if (m > 9) {
            mid = "" + m;
        }
        else {
            mid = "0" + m;
        }
        var back = "00";
        if (second > 9) {
            back = "" + second;
        }
        else {
            back = "0" + second;
        }
        if (d > 0) {
            return d + "天" + h + "时" + m + "分";
        }
        else {
            var longTime = h > 0;
            if (longTime) {
                return front + ":" + mid;
            }
            else {
                return mid + ":" + back; //+ '秒';
            }
        }
    };
    game_helpers.getClockStrByS = function (second, showsecond, showhour) {
        if (showsecond === void 0) { showsecond = true; }
        if (showhour === void 0) { showhour = true; }
        second = Math.floor(second);
        if (second < 0)
            second = 0;
        var h = Math.floor(second / 3600);
        second -= h * 3600;
        var m = Math.floor(second / 60);
        second -= m * 60;
        var front = "00";
        if (h > 9) {
            front = "" + h;
        }
        else {
            front = "0" + h;
        }
        var mid = "00";
        if (m > 9) {
            mid = "" + m;
        }
        else {
            mid = "0" + m;
        }
        var str = "";
        if (showhour) {
            str += front;
            str += ":";
        }
        str += mid;
        if (showsecond)
            str += ":" + (second < 10 ? "0" : "") + second;
        return str;
    };
    game_helpers.checkObjEmpty = function (obj) {
        if (obj) {
            for (var i in obj) {
                return false;
            }
            return true;
        }
        else {
            return true;
        }
    };
    game_helpers.checkOrderOver = function (orderTime) {
        var date = new Date(orderTime);
        var dateNow = new Date(game_helpers.getServerTime());
        if (date.getFullYear() == dateNow.getFullYear() &&
            date.getMonth() == dateNow.getMonth() &&
            date.getDate() == dateNow.getDate()) {
            return false;
        }
        else {
            return true;
        }
    };
    //spa 相对tp目录
    game_helpers.loadSpriteFrame = function (spa, name, callback) {
        if (callback === void 0) { callback = null; }
        this.loadRes("tp/" + spa, "texture", cc.SpriteAtlas, function (e, assets) {
            if (e) {
                console.log(spa, name);
                cc.error(e);
            }
            else {
                callback(assets.getSpriteFrame(name));
            }
        });
    };
    game_helpers.loadRes = function (path, boundle_name, type, callback) {
        if (callback === void 0) { callback = null; }
        cc.assetManager.loadBundle(boundle_name, function (error, bundle) {
            if (error) {
                cc.log(error);
                return;
            }
            bundle.load(path, type, function (e, assets) {
                if (e) {
                    cc.log(e);
                    return;
                }
                callback(e, assets);
            });
        });
    };
    game_helpers.weight = function (v) {
        var mTotalWeight = 0;
        for (var i = 0; i < v.length; ++i) {
            mTotalWeight += v[i];
        }
        if (mTotalWeight <= 0)
            return -1;
        var randnum = Math.round(Math.random() * Number.MAX_VALUE) % mTotalWeight;
        for (var i = 0; i < v.length; ++i) {
            if (randnum < v[i]) {
                return i;
            }
            else {
                randnum -= v[i];
            }
        }
        return -1;
    };
    game_helpers.shuffle = function (arr) {
        for (var i = arr.length - 1; i >= 0; i--) {
            var rIndex = Math.floor(Math.random() * (i + 1));
            var temp = arr[rIndex];
            arr[rIndex] = arr[i];
            arr[i] = temp;
        }
        return arr;
    };
    game_helpers.getDate = function (time) {
        var now = new Date(time), y = now.getFullYear(), m = now.getMonth() + 1, d = now.getDate();
        return y + "-" + (m < 10 ? "0" + m : m) + "-" + (d < 10 ? "0" + d : d) + " " + now.toTimeString().substr(0, 8);
    };
    //货币进位
    game_helpers.goldCrarryBit = function (gold) {
        var array = [
            [100000000, 'N'],
            [10000000, 'T'],
            [1000000, 'G'],
            [100000, 'M'],
            [10000, 'K'],
            [1000, 'B'],
        ];
        for (var i = 0; i < array.length; i++) {
            var value = gold / array[i][0];
            if (value > 1) {
                return '' + value.toFixed(1) + array[i][1];
            }
        }
        return gold.toString();
    };
    //定点数
    game_helpers.fixFloat = function (val, count) {
        if (count === void 0) { count = 2; }
        var a = Math.pow(10, count);
        return Math.floor(val * a) / a;
    };
    //     this.initPool("basechip", ret, 10);
    //     this.initPool("dianchi", ret, 10);
    //     this.initPool("enery", ret, 10);
    //     this.initPool("gem", ret, 10);
    game_helpers.formatString = function (s) {
        var arg = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            arg[_i - 1] = arguments[_i];
        }
        for (var i = 0; i < arg.length; i++) {
            var reg = new RegExp("\\{" + i + "\\}", "gm");
            s = s.replace(reg, arg[i]);
        }
        return s;
    };
    game_helpers.count = function (obj) {
        if (!obj)
            return 0;
        var num = 0;
        for (var k in obj) {
            num++;
        }
        return num;
    };
    ;
    game_helpers.copy = function (obj) {
        var newObj = Object.create(obj);
        Object.assign(newObj, obj);
        return newObj;
    };
    game_helpers.setGray = function (icon, isGray) {
        if (isGray) {
            icon.setMaterial(0, cc.Material.getBuiltinMaterial('2d-gray-sprite'));
        }
        else {
            icon.setMaterial(0, cc.Material.getBuiltinMaterial('2d-sprite'));
        }
    };
    game_helpers.setSpriteFrame = function (sp, path, bundle, callback) {
        if (bundle === void 0) { bundle = 'resources'; }
        if (callback === void 0) { callback = null; }
        var loader = cc.assetManager.getBundle(bundle);
        loader.load(path, cc.Texture2D, function (error, assets) {
            if (error) {
                cc.log('error', path);
                return;
            }
            sp.spriteFrame = new cc.SpriteFrame(assets);
            callback && callback();
        });
    };
    game_helpers.initArray2 = function (row, col, value) {
        if (value === void 0) { value = null; }
        var arr = [];
        for (var i = 0; i < row; i++) {
            arr[i] = [];
            for (var j = 0; j < col; j++) {
                arr[i][j] = value;
            }
        }
        return arr;
    };
    game_helpers.localConvertWorldPointAR = function (node) {
        if (node) {
            return node.convertToWorldSpaceAR(cc.v2(0, 0));
        }
        return null;
    };
    game_helpers.convetOtherNodeSpaceAR = function (node, targetNode) {
        if (!node || !targetNode) {
            return null;
        }
        var worldPoint = game_helpers.localConvertWorldPointAR(node);
        return game_helpers.worldConvertLocalPointAR(targetNode, worldPoint);
    };
    game_helpers.worldConvertLocalPointAR = function (node, worldPoint) {
        if (node) {
            return node.convertToNodeSpaceAR(worldPoint);
        }
        return null;
    };
    // 计算 |p1 p2| X |p1 p|
    game_helpers.getCross = function (p1, p2, p) {
        return (p2.x - p1.x) * (p.y - p1.y) - (p.x - p1.x) * (p2.y - p1.y);
    };
    //判断点p是否在p1p2p3p4的正方形内
    game_helpers.isPointInMatrix = function (p1, p2, p3, p4, p) {
        var isPointIn = game_helpers.getCross(p1, p2, p) * game_helpers.getCross(p3, p4, p) >= 0 && game_helpers.getCross(p2, p3, p) * game_helpers.getCross(p4, p1, p) >= 0;
        return isPointIn;
    };
    game_helpers.randomArray = function (arr) {
        var newArr = [];
        var count = arr.length;
        for (var i = 0; i < count; i++) {
            var rnd = Math.floor(Math.random() * arr.length);
            newArr.push(arr[rnd]);
            arr.splice(rnd, 1);
        }
        return newArr;
    };
    game_helpers.removeElementFromArray = function (element, arr) {
        for (var i = arr.length - 1; i >= 0; i--) {
            if (arr[i] == element) {
                arr.splice(i, 1);
                break;
            }
        }
    };
    game_helpers.getDayCount = function (year, month) {
        var runYear = false;
        if ((year % 100 != 0 && year % 4 == 0) || year % 400 == 0) {
            runYear = true;
        }
        if (month == 1 || month == 3 || month == 5 || month == 7 || month == 8 || month == 10 || month == 12)
            return 31;
        else if (month == 4 || month == 6 || month == 9 || month == 11)
            return 30;
        else
            return runYear ? 29 : 28;
    };
    game_helpers.seed = 5;
    game_helpers.timeOffset = 0;
    return game_helpers;
}());
exports.default = game_helpers;
;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHRzL2dhbWVfaGVscGVycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0lBQUE7SUE4WEEsQ0FBQztJQTVYaUIsdUJBQVUsR0FBeEIsVUFBeUIsS0FBaUI7UUFDdEMsSUFBSSxLQUFLLElBQUksS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7WUFDM0IsT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLEVBQUMsS0FBSyxDQUFDLE1BQU0sR0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3JEO2FBQU07WUFDSCxPQUFPLElBQUksQ0FBQztTQUNmO0lBQ0wsQ0FBQztJQUNhLHlCQUFZLEdBQTFCLFVBQTJCLEdBQVU7UUFFakMsSUFBSSxHQUFHLEdBQUcsRUFBRSxDQUFBO1FBQ1osS0FBSyxJQUFNLEdBQUcsSUFBSSxHQUFHLEVBQUU7WUFDbkIsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQTtTQUNyQjtRQUNELE9BQU8sR0FBRyxDQUFDO0lBQ2YsQ0FBQztJQUNhLHNCQUFTLEdBQXZCLFVBQXdCLEtBQUssRUFBRSxLQUFLO1FBQ2hDLE9BQU8sSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxHQUFHLEtBQUssQ0FBQztJQUNuRCxDQUFDO0lBQUEsQ0FBQztJQUVZLHlCQUFZLEdBQTFCLFVBQTJCLEtBQUssRUFBRSxLQUFLO1FBQ25DLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7SUFDL0QsQ0FBQztJQUFBLENBQUM7SUFJWSx1QkFBVSxHQUF4QjtRQUNJLE9BQU8sWUFBWSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDcEMsbURBQW1EO1FBQ25ELCtCQUErQjtJQUNuQyxDQUFDO0lBQ2EsMEJBQWEsR0FBM0IsVUFBNEIsS0FBSyxFQUFFLEtBQUs7UUFDcEMsT0FBTyxZQUFZLENBQUMsWUFBWSxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQztRQUMvQywwRUFBMEU7SUFDOUUsQ0FBQztJQUVjLGdCQUFHLEdBQWxCLFVBQW1CLElBQUk7UUFDbkIsSUFBSSxHQUFHLENBQUMsSUFBSSxHQUFHLElBQUksR0FBRyxLQUFLLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxXQUFXO1FBQ2xELE9BQU8sSUFBSSxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDN0IsQ0FBQztJQUFBLENBQUM7SUFFWSxzQkFBUyxHQUF2QixVQUF3QixDQUFDO1FBQ3JCLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDM0IsQ0FBQztJQUFBLENBQUM7SUFFWSwwQkFBYSxHQUEzQixVQUE0QixJQUFZO1FBQ3BDLFlBQVksQ0FBQyxVQUFVLEdBQUcsSUFBSSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDdEQsRUFBRSxDQUFDLEdBQUcsQ0FBQyxhQUFhLEVBQUUsWUFBWSxDQUFDLFVBQVUsQ0FBQyxDQUFBO0lBQ2xELENBQUM7SUFHYSwwQkFBYSxHQUEzQjtRQUNJLE9BQU8sSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsR0FBRyxZQUFZLENBQUMsVUFBVSxDQUFDO0lBQzFELENBQUM7SUFDTSx1QkFBVSxHQUFqQixVQUFrQixDQUFDO1FBQ2YsSUFBSSxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkIsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLFdBQVcsRUFBRSxHQUFHLEdBQUcsQ0FBQztRQUNsQyxJQUFJLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7UUFDOUYsSUFBSSxFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7UUFDekUsSUFBSSxFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUM7UUFDaEYsSUFBSSxFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUM7UUFDdEYsSUFBSSxFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQztRQUNoRixPQUFPLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEdBQUcsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQztJQUM3QyxDQUFDO0lBRWEscUJBQVEsR0FBdEIsVUFBdUIsR0FBUTtRQUMzQixHQUFHLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUMx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Q0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLEVBQUUsSUFBSSxLQUFLLElBQUksRUFBRTtZQUNoRyxPQUFPLEVBQUUsQ0FBQTthQUNSLElBQUksS0FBSyxJQUFJLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLEVBQUU7WUFDMUQsT0FBTyxFQUFFLENBQUE7O1lBRVQsT0FBTyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFBO0lBQ2hDLENBQUM7SUFwV2EsaUJBQUksR0FBVyxDQUFDLENBQUM7SUEwQmpCLHVCQUFVLEdBQVcsQ0FBQyxDQUFDO0lBMlV6QyxtQkFBQztDQTlYRCxBQThYQyxJQUFBO2tCQTlYb0IsWUFBWTtBQThYaEMsQ0FBQyIsImZpbGUiOiIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIGdhbWVfaGVscGVycyBcbntcbiAgICBwdWJsaWMgc3RhdGljIHJhbmRvbUl0ZW0oYXJyYXk6IEFycmF5PGFueT4pIHtcbiAgICAgICAgaWYgKGFycmF5ICYmIGFycmF5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiBhcnJheVt0aGlzLmdldFJhbmRvbUludCgwLGFycmF5Lmxlbmd0aC0xKV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIE9iamVjdDJBcnJheShvYmo6T2JqZWN0KTphbnlbXVxuICAgIHtcbiAgICAgICAgbGV0IGFyciA9IFtdXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgICAgICAgICAgYXJyLnB1c2gob2JqW2tleV0pXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFycjtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBnZXRSYW5kb20obG93ZXIsIHVwcGVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgKiAodXBwZXIgLSBsb3dlcikgKyBsb3dlcjtcbiAgICB9O1xuXG4gICAgcHVibGljIHN0YXRpYyBnZXRSYW5kb21JbnQobG93ZXIsIHVwcGVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICh1cHBlciAtIGxvd2VyKSkgKyBsb3dlcjtcbiAgICB9O1xuXG4gICAgcHVibGljIHN0YXRpYyBzZWVkOiBudW1iZXIgPSA1O1xuXG4gICAgcHVibGljIHN0YXRpYyBzZWVkUmFuZG9tKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBnYW1lX2hlbHBlcnMuZ2V0UmFuZG9tKDAsIDEpO1xuICAgICAgICAvLyB0aGlzLnNlZWQgPSAodGhpcy5zZWVkICogOTMwMSArIDQ5Mjk3KSAlIDIzMzI4MDtcbiAgICAgICAgLy8gcmV0dXJuIHRoaXMuc2VlZCAvIDIzMzI4MC4wO1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIHNlZWRSYW5kb21JbnQobG93ZXIsIHVwcGVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIGdhbWVfaGVscGVycy5nZXRSYW5kb21JbnQobG93ZXIsIHVwcGVyKTtcbiAgICAgICAgLy8gcmV0dXJuIE1hdGguZmxvb3IoZ2FtZV9oZWxwZXJzLnNlZWRSYW5kb20oKSAqICh1cHBlciAtIGxvd2VyKSkgKyBsb3dlcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBybmQoc2VlZCkge1xuICAgICAgICBzZWVkID0gKHNlZWQgKiA5MzAxICsgNDkyOTcpICUgMjMzMjgwOyAvL+S4uuS9leS9v+eUqOi/meS4ieS4quaVsD9cbiAgICAgICAgcmV0dXJuIHNlZWQgLyAoMjMzMjgwLjApO1xuICAgIH07XG4gXG4gICAgcHVibGljIHN0YXRpYyBnZXRQb3dOdW0ocCkge1xuICAgICAgICByZXR1cm4gTWF0aC5wb3coMTAsIHApO1xuICAgIH07XG5cbiAgICBwdWJsaWMgc3RhdGljIHNldFNlcnZlclRpbWUodGltZTogbnVtYmVyKSB7XG4gICAgICAgIGdhbWVfaGVscGVycy50aW1lT2Zmc2V0ID0gdGltZSAtIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICBjYy5sb2coXCJ0aW1lT2Zmc2V0OlwiLCBnYW1lX2hlbHBlcnMudGltZU9mZnNldClcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHRpbWVPZmZzZXQ6IG51bWJlciA9IDA7XG4gICAgcHVibGljIHN0YXRpYyBnZXRTZXJ2ZXJUaW1lKCkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCkgKyBnYW1lX2hlbHBlcnMudGltZU9mZnNldDtcbiAgICB9XG4gICAgc3RhdGljIGZvcm1hdERhdGUodCkge1xuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHQpO1xuICAgICAgICB2YXIgWVkgPSBkYXRlLmdldEZ1bGxZZWFyKCkgKyAnLSc7XG4gICAgICAgIHZhciBNTSA9IChkYXRlLmdldE1vbnRoKCkgKyAxIDwgMTAgPyAnMCcgKyAoZGF0ZS5nZXRNb250aCgpICsgMSkgOiBkYXRlLmdldE1vbnRoKCkgKyAxKSArICctJztcbiAgICAgICAgdmFyIEREID0gKGRhdGUuZ2V0RGF0ZSgpIDwgMTAgPyAnMCcgKyAoZGF0ZS5nZXREYXRlKCkpIDogZGF0ZS5nZXREYXRlKCkpO1xuICAgICAgICB2YXIgaGggPSAoZGF0ZS5nZXRIb3VycygpIDwgMTAgPyAnMCcgKyBkYXRlLmdldEhvdXJzKCkgOiBkYXRlLmdldEhvdXJzKCkpICsgJzonO1xuICAgICAgICB2YXIgbW0gPSAoZGF0ZS5nZXRNaW51dGVzKCkgPCAxMCA/ICcwJyArIGRhdGUuZ2V0TWludXRlcygpIDogZGF0ZS5nZXRNaW51dGVzKCkpICsgJzonO1xuICAgICAgICB2YXIgc3MgPSAoZGF0ZS5nZXRTZWNvbmRzKCkgPCAxMCA/ICcwJyArIGRhdGUuZ2V0U2Vjb25kcygpIDogZGF0ZS5nZXRTZWNvbmRzKCkpO1xuICAgICAgICByZXR1cm4gWVkgKyBNTSArIEREICsgXCIgXCIgKyBoaCArIG1tICsgc3M7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBjbG9uZU9iaihvYmo6IGFueSkge1xuICAgICAgICBvYmogPSBKU09OLnN0cmluZ2lmeShvYmopO1xuICAgICAgICBvYmogPSBKU09OLnBhcnNlKG9iaik7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXRUaW1lU3RyQnlTKHNlY29uZDogbnVtYmVyKSB7XG4gICAgICAgIHNlY29uZCA9IE1hdGguZmxvb3Ioc2Vjb25kKTtcbiAgICAgICAgaWYgKHNlY29uZCA8IDApIHNlY29uZCA9IDA7XG4gICAgICAgIHZhciBkID0gTWF0aC5mbG9vcihzZWNvbmQgLyAzNjAwIC8gMjQpO1xuICAgICAgICBzZWNvbmQgLT0gZCAqIDM2MDAgKiAyNDtcbiAgICAgICAgdmFyIGggPSBNYXRoLmZsb29yKHNlY29uZCAvIDM2MDApO1xuICAgICAgICBzZWNvbmQgLT0gaCAqIDM2MDA7XG4gICAgICAgIHZhciBtID0gTWF0aC5mbG9vcihzZWNvbmQgLyA2MCk7XG4gICAgICAgIHNlY29uZCAtPSBtICogNjA7XG4gICAgICAgIHZhciBmcm9udCA9IFwiMDBcIjtcbiAgICAgICAgaWYgKGggPiA5KSB7XG4gICAgICAgICAgICBmcm9udCA9IFwiXCIgKyBoO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZnJvbnQgPSBcIjBcIiArIGg7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1pZCA9IFwiMDBcIjtcbiAgICAgICAgaWYgKG0gPiA5KSB7XG4gICAgICAgICAgICBtaWQgPSBcIlwiICsgbTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1pZCA9IFwiMFwiICsgbTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYmFjayA9IFwiMDBcIjtcbiAgICAgICAgaWYgKHNlY29uZCA+IDkpIHtcbiAgICAgICAgICAgIGJhY2sgPSBcIlwiICsgc2Vjb25kO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYmFjayA9IFwiMFwiICsgc2Vjb25kO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGQgPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZCArIFwi5aSpXCIgKyBoICsgXCLml7ZcIiArIG0gKyBcIuWIhlwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGxvbmdUaW1lID0gaCA+IDA7XG4gICAgICAgICAgICBpZiAobG9uZ1RpbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnJvbnQgKyBcIjpcIiArIG1pZDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1pZCArIFwiOlwiICsgYmFjazsvLysgJ+enkic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldENsb2NrU3RyQnlTKHNlY29uZDogbnVtYmVyLCBzaG93c2Vjb25kOiBib29sZWFuID0gdHJ1ZSwgc2hvd2hvdXI6IGJvb2xlYW4gPSB0cnVlKSB7XG4gICAgICAgIHNlY29uZCA9IE1hdGguZmxvb3Ioc2Vjb25kKTtcbiAgICAgICAgaWYgKHNlY29uZCA8IDApIHNlY29uZCA9IDA7XG4gICAgICAgIHZhciBoID0gTWF0aC5mbG9vcihzZWNvbmQgLyAzNjAwKTtcbiAgICAgICAgc2Vjb25kIC09IGggKiAzNjAwO1xuICAgICAgICB2YXIgbSA9IE1hdGguZmxvb3Ioc2Vjb25kIC8gNjApO1xuICAgICAgICBzZWNvbmQgLT0gbSAqIDYwO1xuICAgICAgICB2YXIgZnJvbnQgPSBcIjAwXCI7XG4gICAgICAgIGlmIChoID4gOSkge1xuICAgICAgICAgICAgZnJvbnQgPSBcIlwiICsgaDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZyb250ID0gXCIwXCIgKyBoO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtaWQgPSBcIjAwXCI7XG4gICAgICAgIGlmIChtID4gOSkge1xuICAgICAgICAgICAgbWlkID0gXCJcIiArIG07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtaWQgPSBcIjBcIiArIG07XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgc3RyID0gXCJcIlxuICAgICAgICBpZiAoc2hvd2hvdXIpIHtcbiAgICAgICAgICAgIHN0ciArPSBmcm9udDtcbiAgICAgICAgICAgIHN0ciArPSBcIjpcIlxuICAgICAgICB9XG4gICAgICAgIHN0ciArPSBtaWQ7XG5cbiAgICAgICAgaWYgKHNob3dzZWNvbmQpXG4gICAgICAgICAgICBzdHIgKz0gXCI6XCIgKyAoc2Vjb25kIDwgMTAgPyBcIjBcIiA6IFwiXCIpICsgc2Vjb25kO1xuXG4gICAgICAgIHJldHVybiBzdHJcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGNoZWNrT2JqRW1wdHkob2JqOiBhbnkpIHtcbiAgICAgICAgaWYgKG9iaikge1xuICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBjaGVja09yZGVyT3ZlcihvcmRlclRpbWU6IG51bWJlcikge1xuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKG9yZGVyVGltZSk7XG4gICAgICAgIHZhciBkYXRlTm93ID0gbmV3IERhdGUoZ2FtZV9oZWxwZXJzLmdldFNlcnZlclRpbWUoKSk7XG5cbiAgICAgICAgaWYgKGRhdGUuZ2V0RnVsbFllYXIoKSA9PSBkYXRlTm93LmdldEZ1bGxZZWFyKCkgJiZcbiAgICAgICAgICAgIGRhdGUuZ2V0TW9udGgoKSA9PSBkYXRlTm93LmdldE1vbnRoKCkgJiZcbiAgICAgICAgICAgIGRhdGUuZ2V0RGF0ZSgpID09IGRhdGVOb3cuZ2V0RGF0ZSgpXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8vc3BhIOebuOWvuXRw55uu5b2VXG4gICAgcHVibGljIHN0YXRpYyBsb2FkU3ByaXRlRnJhbWUoc3BhOnN0cmluZyxuYW1lOnN0cmluZyxjYWxsYmFjazpGdW5jdGlvbiA9IG51bGwpXG4gICAge1xuICAgICAgICB0aGlzLmxvYWRSZXMoXCJ0cC9cIiArIHNwYSxcInRleHR1cmVcIixjYy5TcHJpdGVBdGxhcywoZSxhc3NldHM6Y2MuU3ByaXRlQXRsYXMpPT57XG4gICAgICAgICAgICBpZihlKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNwYSxuYW1lKVxuICAgICAgICAgICAgICAgIGNjLmVycm9yKGUpXG4gICAgICAgICAgICB9ZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGFzc2V0cy5nZXRTcHJpdGVGcmFtZShuYW1lKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cblxuXG4gICAgcHVibGljIHN0YXRpYyBsb2FkUmVzKHBhdGg6IHN0cmluZywgYm91bmRsZV9uYW1lOiBzdHJpbmcsIHR5cGU6IHR5cGVvZiBjYy5Bc3NldCwgY2FsbGJhY2s6IEZ1bmN0aW9uID0gbnVsbCkge1xuICAgICAgICBjYy5hc3NldE1hbmFnZXIubG9hZEJ1bmRsZShib3VuZGxlX25hbWUsIChlcnJvciwgYnVuZGxlOiBjYy5Bc3NldE1hbmFnZXIuQnVuZGxlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjYy5sb2coZXJyb3IpXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBidW5kbGUubG9hZChwYXRoLCB0eXBlLCAoZSwgYXNzZXRzKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYoZSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZSxhc3NldHMpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgd2VpZ2h0KHY6IG51bWJlcltdKTogbnVtYmVyIHtcbiAgICAgICAgdmFyIG1Ub3RhbFdlaWdodCA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdi5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgbVRvdGFsV2VpZ2h0ICs9IHZbaV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1Ub3RhbFdlaWdodCA8PSAwKSByZXR1cm4gLTE7XG4gICAgICAgIHZhciByYW5kbnVtID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogTnVtYmVyLk1BWF9WQUxVRSkgJSBtVG90YWxXZWlnaHQ7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdi5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgaWYgKHJhbmRudW0gPCB2W2ldKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByYW5kbnVtIC09IHZbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgc2h1ZmZsZShhcnIpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IGFyci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgbGV0IHJJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpICsgMSkpO1xuICAgICAgICAgICAgbGV0IHRlbXAgPSBhcnJbckluZGV4XTtcbiAgICAgICAgICAgIGFycltySW5kZXhdID0gYXJyW2ldO1xuICAgICAgICAgICAgYXJyW2ldID0gdGVtcDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJyO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0RGF0ZSh0aW1lOiBudW1iZXIpOiBzdHJpbmcge1xuICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUodGltZSksXG4gICAgICAgICAgICB5ID0gbm93LmdldEZ1bGxZZWFyKCksXG4gICAgICAgICAgICBtID0gbm93LmdldE1vbnRoKCkgKyAxLFxuICAgICAgICAgICAgZCA9IG5vdy5nZXREYXRlKCk7XG4gICAgICAgIHJldHVybiB5ICsgXCItXCIgKyAobSA8IDEwID8gXCIwXCIgKyBtIDogbSkgKyBcIi1cIiArIChkIDwgMTAgPyBcIjBcIiArIGQgOiBkKSArIFwiIFwiICsgbm93LnRvVGltZVN0cmluZygpLnN1YnN0cigwLCA4KTtcbiAgICB9XG5cbiAgICAvL+i0p+W4gei/m+S9jVxuICAgIHB1YmxpYyBzdGF0aWMgZ29sZENyYXJyeUJpdChnb2xkOiBudW1iZXIpOiBzdHJpbmcge1xuXG4gICAgICAgIHZhciBhcnJheSA9IFtcbiAgICAgICAgICAgIFsxMDAwMDAwMDAsICdOJ10sXG4gICAgICAgICAgICBbMTAwMDAwMDAsICdUJ10sXG4gICAgICAgICAgICBbMTAwMDAwMCwgJ0cnXSxcbiAgICAgICAgICAgIFsxMDAwMDAsICdNJ10sXG4gICAgICAgICAgICBbMTAwMDAsICdLJ10sXG4gICAgICAgICAgICBbMTAwMCwgJ0InXSxcbiAgICAgICAgXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gZ29sZCAvIChhcnJheVtpXVswXSBhcyBudW1iZXIpO1xuICAgICAgICAgICAgaWYgKHZhbHVlID4gMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnJyArIHZhbHVlLnRvRml4ZWQoMSkgKyBhcnJheVtpXVsxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ29sZC50b1N0cmluZygpO1xuICAgIH1cbiAgICAvL+WumueCueaVsFxuICAgIHB1YmxpYyBzdGF0aWMgZml4RmxvYXQodmFsOiBudW1iZXIsIGNvdW50OiBudW1iZXIgPSAyKSB7XG4gICAgICAgIHZhciBhID0gTWF0aC5wb3coMTAsIGNvdW50KVxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcih2YWwgKiBhKSAvIGE7XG4gICAgfVxuXG4gICAgLy8gICAgIHRoaXMuaW5pdFBvb2woXCJiYXNlY2hpcFwiLCByZXQsIDEwKTtcbiAgICAvLyAgICAgdGhpcy5pbml0UG9vbChcImRpYW5jaGlcIiwgcmV0LCAxMCk7XG4gICAgLy8gICAgIHRoaXMuaW5pdFBvb2woXCJlbmVyeVwiLCByZXQsIDEwKTtcbiAgICAvLyAgICAgdGhpcy5pbml0UG9vbChcImdlbVwiLCByZXQsIDEwKTtcblxuXG5cbiAgICBzdGF0aWMgZm9ybWF0U3RyaW5nKHM6IHN0cmluZywgLi4uYXJnKSB7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmcubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKFwiXFxcXHtcIiArIGkgKyBcIlxcXFx9XCIsIFwiZ21cIik7XG4gICAgICAgICAgICBzID0gcy5yZXBsYWNlKHJlZywgYXJnW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcztcbiAgICB9XG5cbiAgICBzdGF0aWMgY291bnQob2JqKSB7XG4gICAgICAgIGlmICghb2JqKSByZXR1cm4gMDtcbiAgICAgICAgdmFyIG51bSA9IDA7XG4gICAgICAgIGZvciAodmFyIGsgaW4gb2JqKSB7XG4gICAgICAgICAgICBudW0rKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVtO1xuICAgIH07XG4gICAgc3RhdGljIGNvcHkob2JqKSB7XG4gICAgICAgIHZhciBuZXdPYmogPSBPYmplY3QuY3JlYXRlKG9iaik7XG4gICAgICAgIE9iamVjdC5hc3NpZ24obmV3T2JqLCBvYmopO1xuICAgICAgICByZXR1cm4gbmV3T2JqO1xuICAgIH1cbiAgICBzdGF0aWMgc2V0R3JheShpY29uOiBjYy5TcHJpdGUsIGlzR3JheTogYm9vbGVhbikge1xuICAgICAgICBpZiAoaXNHcmF5KSB7XG4gICAgICAgICAgICBpY29uLnNldE1hdGVyaWFsKDAsIGNjLk1hdGVyaWFsLmdldEJ1aWx0aW5NYXRlcmlhbCgnMmQtZ3JheS1zcHJpdGUnKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpY29uLnNldE1hdGVyaWFsKDAsIGNjLk1hdGVyaWFsLmdldEJ1aWx0aW5NYXRlcmlhbCgnMmQtc3ByaXRlJykpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzZXRTcHJpdGVGcmFtZShzcDogY2MuU3ByaXRlLCBwYXRoOiBzdHJpbmcsIGJ1bmRsZTogc3RyaW5nID0gJ3Jlc291cmNlcycsIGNhbGxiYWNrID0gbnVsbCk6IHZvaWQge1xuICAgICAgICBsZXQgbG9hZGVyID0gY2MuYXNzZXRNYW5hZ2VyLmdldEJ1bmRsZShidW5kbGUpXG4gICAgICAgIGxvYWRlci5sb2FkKHBhdGgsIGNjLlRleHR1cmUyRCwgKGVycm9yLCBhc3NldHM6IGNjLlRleHR1cmUyRCkgPT4ge1xuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY2MubG9nKCdlcnJvcicsIHBhdGgpXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzcC5zcHJpdGVGcmFtZSA9bmV3IGNjLlNwcml0ZUZyYW1lKGFzc2V0cylcbiAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKClcbiAgICAgICAgfSlcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBpbml0QXJyYXkyKHJvdzogbnVtYmVyLCBjb2w6IG51bWJlciwgdmFsdWU6IG51bWJlciA9IG51bGwpIHtcbiAgICAgICAgbGV0IGFyciA9IFtdXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93OyBpKyspIHtcbiAgICAgICAgICAgIGFycltpXSA9IFtdXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNvbDsgaisrKSB7XG4gICAgICAgICAgICAgICAgYXJyW2ldW2pdID0gdmFsdWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJyXG4gICAgfVxuICAgIHN0YXRpYyBsb2NhbENvbnZlcnRXb3JsZFBvaW50QVIobm9kZSkge1xuICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGUuY29udmVydFRvV29ybGRTcGFjZUFSKGNjLnYyKDAsIDApKTtcbiAgICAgICAgfSByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgc3RhdGljIGNvbnZldE90aGVyTm9kZVNwYWNlQVIobm9kZSwgdGFyZ2V0Tm9kZSk6IGNjLlZlYzIge1xuICAgICAgICBpZiAoIW5vZGUgfHwgIXRhcmdldE5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGxldCB3b3JsZFBvaW50ID0gZ2FtZV9oZWxwZXJzLmxvY2FsQ29udmVydFdvcmxkUG9pbnRBUihub2RlKTtcbiAgICAgICAgcmV0dXJuIGdhbWVfaGVscGVycy53b3JsZENvbnZlcnRMb2NhbFBvaW50QVIodGFyZ2V0Tm9kZSwgd29ybGRQb2ludCk7XG4gICAgfVxuXG4gICAgc3RhdGljIHdvcmxkQ29udmVydExvY2FsUG9pbnRBUihub2RlLCB3b3JsZFBvaW50KSB7XG4gICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZS5jb252ZXJ0VG9Ob2RlU3BhY2VBUih3b3JsZFBvaW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLy8g6K6h566XIHxwMSBwMnwgWCB8cDEgcHxcbiAgICBzdGF0aWMgZ2V0Q3Jvc3MocDE6IGNjLlZlYzIsIHAyOiBjYy5WZWMyLCBwOiBjYy5WZWMyKSB7XG4gICAgICAgIHJldHVybiAocDIueCAtIHAxLngpICogKHAueSAtIHAxLnkpIC0gKHAueCAtIHAxLngpICogKHAyLnkgLSBwMS55KTtcbiAgICB9XG4gICAgLy/liKTmlq3ngrlw5piv5ZCm5ZyocDFwMnAzcDTnmoTmraPmlrnlvaLlhoVcbiAgICBzdGF0aWMgaXNQb2ludEluTWF0cml4KHAxOiBjYy5WZWMyLCBwMjogY2MuVmVjMiwgcDM6IGNjLlZlYzIsIHA0OiBjYy5WZWMyLCBwOiBjYy5WZWMyKSB7XG4gICAgICAgIGxldCBpc1BvaW50SW4gPSBnYW1lX2hlbHBlcnMuZ2V0Q3Jvc3MocDEsIHAyLCBwKSAqIGdhbWVfaGVscGVycy5nZXRDcm9zcyhwMywgcDQsIHApID49IDAgJiYgZ2FtZV9oZWxwZXJzLmdldENyb3NzKHAyLCBwMywgcCkgKiBnYW1lX2hlbHBlcnMuZ2V0Q3Jvc3MocDQsIHAxLCBwKSA+PSAwO1xuICAgICAgICByZXR1cm4gaXNQb2ludEluO1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIHJhbmRvbUFycmF5KGFycjogbnVtYmVyW10pIHtcbiAgICAgICAgbGV0IG5ld0FyciA9IFtdXG4gICAgICAgIGxldCBjb3VudCA9IGFyci5sZW5ndGhcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgcm5kID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXJyLmxlbmd0aClcbiAgICAgICAgICAgIG5ld0Fyci5wdXNoKGFycltybmRdKVxuICAgICAgICAgICAgYXJyLnNwbGljZShybmQsIDEpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld0FyclxuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIHJlbW92ZUVsZW1lbnRGcm9tQXJyYXkoZWxlbWVudDogYW55LCBhcnIpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IGFyci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgaWYgKGFycltpXSA9PSBlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgYXJyLnNwbGljZShpLCAxKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGdldERheUNvdW50KHllYXIsIG1vbnRoKSB7XG4gICAgICAgIGxldCBydW5ZZWFyID0gZmFsc2VcbiAgICAgICAgaWYgKCh5ZWFyICUgMTAwICE9IDAgJiYgeWVhciAlIDQgPT0gMCkgfHwgeWVhciAlIDQwMCA9PSAwKSB7XG4gICAgICAgICAgICBydW5ZZWFyID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChtb250aCA9PSAxIHx8IG1vbnRoID09IDMgfHwgbW9udGggPT0gNSB8fCBtb250aCA9PSA3IHx8IG1vbnRoID09IDggfHwgbW9udGggPT0gMTAgfHwgbW9udGggPT0gMTIpXG4gICAgICAgICAgICByZXR1cm4gMzFcbiAgICAgICAgZWxzZSBpZiAobW9udGggPT0gNCB8fCBtb250aCA9PSA2IHx8IG1vbnRoID09IDkgfHwgbW9udGggPT0gMTEpXG4gICAgICAgICAgICByZXR1cm4gMzBcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIHJ1blllYXIgPyAyOSA6IDI4XG4gICAgfVxufTsiXX0=